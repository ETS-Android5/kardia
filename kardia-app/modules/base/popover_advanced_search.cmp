$Version=2$
popover_advanced_search "widget/component-decl"
    {
    width=1280;
    height=700;

    Open "widget/component-decl-action" { }

    onOpen "widget/connector"
	{
	event=Open;
	target=adv_search_win;
	action=Open;
	IsModal=1;
	PointAt=runclient(:PointAt);
	PointSide=runclient(:PointSide);
	}

    search_osrc "widget/parameter" { type=object; find_container="widget/osrc"; }

    onOsrcBegin "widget/connector"
	{
	source=search_osrc;
	event=BeginQuery;
	target=adv_search_win;
	action=Close;
	}

    adv_search_win "widget/childwindow"
	{
	width=400;
	height=600;
	x=0; y=0;
	fl_y=0;
	titlebar=no;
	visible=no;
	border_radius=8;
	border_style=solid;
	border_color="#6080c0";
	shadow_radius=8;
	shadow_color="#6080c0";
	shadow_offset=0;
	background=null;
	bgcolor="#f8f8f8";

	asw_vbox "widget/vbox"
	    {
	    x=20; y=10;
	    width=348; height=548;
	    spacing=4;
	    cellsize=20;

	    asw_label "widget/label"
		{
		height=20;
		font_size=16;
		style=bold;
		align=center;
		text="Advanced Search:";
		}

	    sep "widget/image" { height=1; fl_height=0; fl_width=100; source="/apps/kardia/images/bg/lsblue_horizsep.png"; }

	    advinst_lbl "widget/label"
		{
		height = 70;
		style=italic;
		text = "Type your search and press ENTER.  You can use '*' as a wildcard.  For example, enter 'J*' in First Name to search for all first names that start with J.  Enter '*son' in Last Name to find all last names that end with 'son'.";
		}

	    form "widget/form"
		{
		objectsource = search_osrc;
		allow_view=no;
		allow_new=no;
		allow_query=yes;
		auto_focus=no;
		allow_nodata=no;
		allow_modify=no;

		p_partner_key_cmp "widget/component" { type="readonly"; path="/sys/cmp/smart_field.cmp"; field=p_partner_key; text="Partner ID:"; ctl_type="editbox"; tooltip="Partner Key"; }
		p_given_name_cmp "widget/component" { type="readonly"; path="/sys/cmp/smart_field.cmp"; field=p_given_name; text="First Name:"; lookup_width=325; ctl_type="editbox"; tooltip="The first (Given) name of the partner"; }
		p_preferred_name_cmp "widget/component" { type="readonly"; path="/sys/cmp/smart_field.cmp"; field=p_preferred_name; text="Salutation:"; lookup_width=325; ctl_type="editbox"; tooltip="Preferred name (nickname, etc) of the partner"; }
		p_surname_cmp "widget/component" { type="readonly"; path="/sys/cmp/smart_field.cmp"; field=p_surname; text="Last Name:"; lookup_width=325; ctl_type="editbox"; tooltip="The last Name (Surname) of the partner"; }
		p_org_name_cmp "widget/component" { type="readonly"; path="/sys/cmp/smart_field.cmp"; field=p_org_name; text="Organization:"; lookup_width=325; ctl_type="editbox"; tooltip="The name of the organization"; }
		p_in_care_of_cmp "widget/component" { type="readonly"; path="/sys/cmp/smart_field.cmp"; field=p_in_care_of; text="In Care Of:"; lookup_width=325; ctl_type="editbox"; tooltip="In Care Of"; }

		p_address_1_cmp "widget/component" { type="readonly"; path="/sys/cmp/smart_field.cmp"; field=p_address_1; text="Addr Line 1:"; lookup_width=325; ctl_type="editbox"; tooltip="First Address"; }
		p_address_2_cmp "widget/component" { type="readonly"; path="/sys/cmp/smart_field.cmp"; field=p_address_2; text="Addr Line 2:"; lookup_width=325; ctl_type="editbox"; tooltip="Second Address"; }
		p_address_3_cmp "widget/component" { type="readonly"; path="/sys/cmp/smart_field.cmp"; field=p_address_3; text="Addr Line 3:"; lookup_width=325; ctl_type="editbox"; tooltip="Third Address field for when address 1 and address2 are filled"; }
		p_city_cmp "widget/component" { type="readonly"; path="/sys/cmp/smart_field.cmp"; field=p_city; text="City:"; lookup_width=305; ctl_type="editbox"; tooltip="The city or township"; }
		p_state_province_cmp "widget/component" { type="readonly"; path="/sys/cmp/smart_field.cmp"; field=p_state_province; text="State/Prov:"; lookup_width=305; ctl_type="editbox"; tooltip="Use country-keyed ref tbl 4 state/prov/county"; }
		p_postal_code_cmp "widget/component" { type="readonly"; path="/sys/cmp/smart_field.cmp"; field=p_postal_code; text="Postal Code:"; ctl_type="editbox"; tooltip="zip code or postal code"; }

		p_country_code_cmp "widget/component" { type="readonly"; path="/sys/cmp/smart_field.cmp"; field=p_country_code; text="Country Code:"; lookup_width=305; ctl_type="editbox"; tooltip="Use ISO codes same as domain names"; }
		p_partner_class_cmp "widget/component" { type="readonly"; path="/sys/cmp/smart_field.cmp"; field=p_partner_class; text="Partner Type:"; lookup_width=305; tooltip=""; ctl_type="dropdown"; sql="select :text, :tag from /apps/kardia/data/Kardia_DB/_p_partner_class/rows";}
		p_title_cmp "widget/component" { type="readonly"; path="/sys/cmp/smart_field.cmp"; field=p_title; text="Title:"; ctl_type="editbox"; tooltip="The Partners Title"; }
		p_comments_cmp "widget/component" { type="readonly"; path="/sys/cmp/smart_field.cmp"; field=p_comments; text="Comments:"; lookup_width=305; ctl_type="editbox"; tooltip=""; }
		p_legacy_key_1_cmp "widget/component" { type="readonly"; path="/sys/cmp/smart_field.cmp"; field=p_legacy_key_1; text="Legacy Key:"; ctl_type="editbox"; tooltip="Legacy Key 1"; }
		p_legacy_key_2_cmp "widget/component" { type="readonly"; path="/sys/cmp/smart_field.cmp"; field=p_legacy_key_2; text="Legacy Key 2:"; ctl_type="editbox"; tooltip="Legacy Key 2"; }
		}
	    }

	btn_hbox "widget/hbox"
	    {
	    x=20; y=558; 
	    height=24; width=360;
	    align=center;
	    spacing=10;

	    search_btn "widget/textbutton"
		{
		width=100; height=24;
		text = "Search";
		background="/apps/kardia/images/bg/lsblue_btngradient.png";
		fgcolor1=white;
		fgcolor2=black;
		disable_color="#334466";

		on_search1 "widget/connector"
		    {
		    event=Click;
		    target=form;
		    action=QueryExec;
		    }
		on_search2 "widget/connector"
		    {
		    event=Click;
		    target=adv_search_win;
		    action=Close;
		    }
		}

	    cancel_btn "widget/textbutton"
		{
		width=100; height=24;
		text = "Cancel";
		background="/apps/kardia/images/bg/lsblue_btngradient.png";
		fgcolor1=white;
		fgcolor2=black;
		disable_color="#334466";

		on_cancel "widget/connector"
		    {
		    event=Click;
		    target=adv_search_win;
		    action=Close;
		    }
		}
	    }
	}
    }
